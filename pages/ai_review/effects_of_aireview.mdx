# AIレビューの効果

## 概要

特にソフトウェア開発の分野では、開発者がAIにコード生成やレビューを依頼することが広く行われている。このデモでは、リポジトリの特性（履歴管理）を活用して、変更箇所に対するAIによる自動レビューを実施している。

本稿では、GitLabと連携したAIレビューの実施ステップと効果について述べる。

## 実施ステップ

本リポジトリでは、以下の順書でAIレビューが実施される。

import { Steps } from 'nextra/components'

<Steps>

### 変更コードをリモートリポジトリ(GitLab)にプッシュ

### プッシュをトリガーにCI/CDパイプラインでAIレビューのジョブを自動実行

### GitLabのコンテナレジストリからopenai-reviewイメージをDLし、コンテナを実行

### コンテナ内でコード変更差分を取得し、プロンプトと共にOpenAIのAPIに送信

### OpenAIにてAIレビューを実施

### コンテナ内でレビュー結果を受信し、マージリクエストに結果をポスト

</Steps>

## 実施結果例

### コードレビュー

[AIレビュー例](https://gitlab.com/taku-miyanaga/openai-review/-/merge_requests/1#note_1710772050)
![alt](./img/ai-review-screenshot.png)

### ドキュメントレビュー

[AIレビュー例](https://gitlab.com/taku-miyanaga/docs/-/merge_requests/1#note_1711747535)
![alt](./img/ai-review-screenshot2.png)

## 効果

### 品質向上

AIは継続的な品質保証を提供し、ヒューマンエラーのリスクを低減する。これは、ソフトウェアコードのバグ検出や、文書の文法・スタイルのチェックにおいて特に顕著である。

### 効率の向上

AIレビューは迅速かつ正確に作業を実行する。手動でのレビューに比べて時間を大幅に節約し、より多くのタスクを短時間で処理することが可能である。

### 一貫性の確保

AIは一定の基準に基づいて判断を行うため、レビューの一貫性が保たれる。人間のレビュアーが持つ主観やバイアスの影響を受けないため、公平かつ均一な評価が期待できる。

### 知識の蓄積と共有

AIは過去のデータから学習し、その知識を新たなケースに適用する。これにより、組織内での知識の蓄積と共有が促進される。

### コスト削減

効率化と自動化により、人的リソースの削減や時間コストの節約が可能となる。これは、長期的なコストメリットをもたらす。

## まとめ

GPT-4によるAIレビューは既に十分な実用レベルに達しており、個別のチューターとして開発プロセスの改善に寄与する。

また、開発速度の面でもAIレビューは改善をもたらす。

トランクベース開発に代表される昨今の迅速な開発スタイルではリリースまでの時間がシビアに要求され、前述のDoraMetrixではエリートレベルのDevOpsチームではコミットからリリースまでの時間は1時間以内と定められている。テスト〜リリースが自動化された理想的なパイプラインではコミット後に人の判断が必要なのはレビューのみだが、安定して1時間以内にコードレビューを実施するのは現実的に難しく、ボトルネックとなっている。有識者の判断を必要としないAIレビューはこのボトルネック解消をサポートし、迅速な開発を推進するための有力な手段になる。

## 課題

課題としては、2023年末時点でOpenAIは追加学習を許可しておらず、現在のプロジェクトとの整合性や背景を加味したレビューができない点が挙げられる。この点で有識者のレビューに及ばないため、現時点では補助機能としての利用に留まっている。

今後、汎用AIで追加学習可能となったとき、要件と既存コードを含めたリポジトリ自体を学習させることができれば、より精度の高いコード生成とレビューが可能になる。開発コードだけではなくインフラ設定や設計書をコード化してリポジトリに格納しておくことが、AIのアップデートに迅速に対応していくための準備となる。
